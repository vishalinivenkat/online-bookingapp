{"version":3,"file":"src_app_pages_history_history_module_ts.js","mappings":"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","sources":["./src/app/pages/history/history-routing.module.ts","./src/app/pages/history/history.module.ts","./src/app/pages/history/history.page.ts","./src/app/pages/history/history.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HistoryPage } from './history.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HistoryPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HistoryPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HistoryPageRoutingModule } from './history-routing.module';\n\nimport { HistoryPage } from './history.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HistoryPageRoutingModule\n  ],\n  declarations: [HistoryPage]\n})\nexport class HistoryPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { Firestore, collection, getDocs } from '@angular/fire/firestore';\nimport { Auth } from '@angular/fire/auth';\nimport { catchError, finalize } from 'rxjs/operators';\nimport { of } from 'rxjs';\n\n@Component({\n  selector: 'app-history',\n  templateUrl: './history.page.html',\n  styleUrls: ['./history.page.scss'],\n})\nexport class HistoryPage implements OnInit {\n  histories: any[] = [];\n  loading: boolean = true;\n\n  constructor(private nav: NavController, private firestore: Firestore, private auth: Auth) { }\n\n  ngOnInit() {\n    this.loadHistory();\n  }\n\n  goBack() {\n    this.nav.pop();\n  }\n\n  async loadHistory() {\n    try {\n      const userId = this.auth.currentUser.uid;\n      const historyRef = collection(this.firestore, `Riders/${userId}/History`);\n      const snapshot = await getDocs(historyRef);\n      this.histories = snapshot.docs.map(doc => doc.data());\n      console.log('Fetched data:', this.histories); // Debugging log\n    } catch (error) {\n      console.error('Error fetching history:', error); // Handle any errors\n    } finally {\n      this.loading = false; // Ensure loading is set to false after data is fetched\n    }\n  }\n}\n","<ion-header class=\"ion-no-border\" [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button color=\"primary\">\n        <ion-back-button></ion-back-button>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>History</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <!-- Skeleton loaders while data is loading -->\n  <ion-list *ngIf=\"loading; else loadedContent\">\n    <ion-item *ngFor=\"let item of [1, 2, 3, 4, 5]\">\n      <ion-avatar slot=\"start\">\n        <ion-skeleton-text animated></ion-skeleton-text>\n      </ion-avatar>\n      <ion-label>\n        <h2><ion-skeleton-text animated style=\"width: 80%;\"></ion-skeleton-text></h2>\n        <p><ion-skeleton-text animated style=\"width: 60%;\"></ion-skeleton-text></p>\n        <p><ion-skeleton-text animated style=\"width: 40%;\"></ion-skeleton-text></p>\n        <p><ion-skeleton-text animated style=\"width: 50%;\"></ion-skeleton-text></p>\n      </ion-label>\n    </ion-item>\n  </ion-list>\n\n  <!-- Loaded content after data fetching is complete -->\n  <ng-template #loadedContent>\n    <ion-list *ngIf=\"histories.length > 0; else noData\">\n      <ion-item *ngFor=\"let history of histories\">\n        <ion-avatar slot=\"start\">\n          <ion-img [src]=\"history.Driver_imgUrl\"></ion-img>\n        </ion-avatar>\n        <ion-label>\n          <h2>{{ history.Driver_name }}</h2>\n          <p>{{ history.Driver_car }} - {{ history.Driver_plate }}</p>\n          <p>Rating: {{ history.Driver_rating }}</p>\n          <p>{{ history.time?.toDate() | date: 'short' }}</p>\n        </ion-label>\n      </ion-item>\n    </ion-list>\n  </ng-template>\n\n  <!-- No Data - show SVG when there is no history -->\n  <ng-template #noData>\n    <ion-img src=\"../assets/imgs/empty.svg\"></ion-img>\n    <ion-list-header style=\"margin-top: 10%\">\n      <ion-label color=\"primary\" class=\"ion-text-center\">\n        <h1>No Data</h1>\n        <p>Book a ride to see History</p>\n      </ion-label>\n    </ion-list-header>\n  </ng-template>\n</ion-content>\n"],"names":["collection","getDocs","i0","_r3","HistoryPage","constructor","nav","firestore","auth","ngOnInit","loadHistory","goBack","pop","userId","currentUser","uid","historyRef","snapshot","histories","docs","map","doc","data","console","log","error","loading","selectors","decls","vars","consts","template","_r1"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}